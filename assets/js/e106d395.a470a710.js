(self.webpackChunkkubevela_io=self.webpackChunkkubevela_io||[]).push([[42210],{3905:function(e,t,r){"use strict";r.d(t,{Zo:function(){return u},kt:function(){return b}});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=a.createContext({}),d=function(e){var t=a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},u=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=d(r),b=n,m=p["".concat(s,".").concat(b)]||p[b]||c[b]||i;return r?a.createElement(m,o(o({ref:t},u),{},{components:r})):a.createElement(m,o({ref:t},u))}));function b(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,o=new Array(i);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,o[1]=l;for(var d=2;d<i;d++)o[d]=r[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,r)}p.displayName="MDXCreateElement"},53876:function(e,t,r){"use strict";r.r(t),r.d(t,{frontMatter:function(){return o},metadata:function(){return l},toc:function(){return s},default:function(){return u}});var a=r(22122),n=r(19756),i=(r(67294),r(3905)),o={title:"Observability"},l={unversionedId:"platform-engineers/system-operation/observability",id:"version-v1.2/platform-engineers/system-operation/observability",isDocsHomePage:!1,title:"Observability",description:"The Observability addon provides system-level monitoring for KubeVela core and business-level monitoring for applications",source:"@site/versioned_docs/version-v1.2/platform-engineers/system-operation/observability.md",sourceDirName:"platform-engineers/system-operation",slug:"/platform-engineers/system-operation/observability",permalink:"/docs/v1.2/platform-engineers/system-operation/observability",editUrl:"https://github.com/oam-dev/kubevela.io/edit/main/docs/platform-engineers/system-operation/observability.md",version:"v1.2",lastUpdatedBy:"Tianxin Dong",lastUpdatedAt:1642681293,formattedLastUpdatedAt:"1/20/2022",frontMatter:{title:"Observability"},sidebar:"version-v1.2/docs",previous:{title:"Managing Clusters",permalink:"/docs/v1.2/platform-engineers/system-operation/managing-clusters"},next:{title:"Performance Fine-tuning",permalink:"/docs/v1.2/platform-engineers/system-operation/performance-finetuning"}},s=[{value:"Introduction to Observable Capabilities",id:"introduction-to-observable-capabilities",children:[{value:"Built-in metric category I: KubeVela Core system-level observability",id:"built-in-metric-category-i-kubevela-core-system-level-observability",children:[]},{value:"Built-in metrics category II: KubeVela Core log monitoring",id:"built-in-metrics-category-ii-kubevela-core-log-monitoring",children:[]}]},{value:"Installing the addon",id:"installing-the-addon",children:[{value:"Self-built/regular Kubernetes clusters",id:"self-builtregular-kubernetes-clusters",children:[]},{value:"Kubernetes clusters provided by cloud providers",id:"kubernetes-clusters-provided-by-cloud-providers",children:[]}]},{value:"View monitoring data",id:"view-monitoring-data",children:[{value:"Get an account for the monitoring dashboard",id:"get-an-account-for-the-monitoring-dashboard",children:[]},{value:"Get the monitoring url",id:"get-the-monitoring-url",children:[]},{value:"View monitoring data for various categories",id:"view-monitoring-data-for-various-categories",children:[]}]}],d={toc:s};function u(e){var t=e.components,o=(0,n.Z)(e,["components"]);return(0,i.kt)("wrapper",(0,a.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The Observability addon provides system-level monitoring for KubeVela core and business-level monitoring for applications\nbased on metrics, logging, and tracing data."),(0,i.kt)("p",null,"The following describes observability capabilities in detail, and how to enable the observability addon and view various\nmonitoring data."),(0,i.kt)("h2",{id:"introduction-to-observable-capabilities"},"Introduction to Observable Capabilities"),(0,i.kt)("p",null,"KubeVela observable capabilities are demonstrated through ",(0,i.kt)("a",{parentName:"p",href:"https://grafana.com/"},"Grafana")," and provide system-level and\napplication-level data monitoring."),(0,i.kt)("h3",{id:"built-in-metric-category-i-kubevela-core-system-level-observability"},"Built-in metric category I: KubeVela Core system-level observability"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"KubeVela Core resource usage monitoring")),(0,i.kt)("p",null,"1) CPU, memory, and other usage and utilization data"),(0,i.kt)("p",null,(0,i.kt)("img",{src:r(91810).Z})),(0,i.kt)("p",null,"2) Graphical representation of CPU and memory usage and utilization over time (e.g. last three hours), and network bandwidth per second"),(0,i.kt)("p",null,(0,i.kt)("img",{src:r(79035).Z})),(0,i.kt)("h3",{id:"built-in-metrics-category-ii-kubevela-core-log-monitoring"},"Built-in metrics category II: KubeVela Core log monitoring"),(0,i.kt)("p",null,"1) Log statistics"),(0,i.kt)("p",null,"The observable page displays the total number of KubeVela Core logs, as well as the number of ",(0,i.kt)("inlineCode",{parentName:"p"},"error")," occurrences, frequency,\noverview of all logs that occur, and details by default."),(0,i.kt)("p",null,(0,i.kt)("img",{src:r(82189).Z})),(0,i.kt)("p",null,"It also shows the total number and frequency, of ",(0,i.kt)("inlineCode",{parentName:"p"},"error")," log occurrences over time."),(0,i.kt)("p",null,(0,i.kt)("img",{src:r(22860).Z})),(0,i.kt)("p",null,"2) Logging filter"),(0,i.kt)("p",null,"You can also filter the logs by filling keywords at the top."),(0,i.kt)("p",null,(0,i.kt)("img",{src:r(6300).Z})),(0,i.kt)("h2",{id:"installing-the-addon"},"Installing the addon"),(0,i.kt)("p",null,"The observability addon is experimental, ",(0,i.kt)("a",{parentName:"p",href:"/docs/v1.2/platform-engineers/addon/intro"},"Experimental Addon Registry")," should be enabled first. The\naddon relies on Prometheus, and Prometheus alert manager, and server depend on PersistentVolume. So the size of PV has to be\nset, ie, the parameter ",(0,i.kt)("inlineCode",{parentName:"p"},"disk-size")," in the command line ",(0,i.kt)("inlineCode",{parentName:"p"},"vela addon enable observability"),", and the default value is 20GB.\nIt also depends on StorageClass, so one default Storage has to be set."),(0,i.kt)("h3",{id:"self-builtregular-kubernetes-clusters"},"Self-built/regular Kubernetes clusters"),(0,i.kt)("p",null,"Execute the following command to install the observability plugin. The steps are the same for similar clusters, like KinD."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ vela addon enable observability disk-size=2\n")),(0,i.kt)("h3",{id:"kubernetes-clusters-provided-by-cloud-providers"},"Kubernetes clusters provided by cloud providers"),(0,i.kt)("h4",{id:"alibaba-cloud-ack"},"Alibaba Cloud ACK"),(0,i.kt)("p",null,"First pick one StorageClass as the default one."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'$ kubectl get storageclass\nNAME                       PROVISIONER     RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE\nalicloud-disk-available    alicloud/disk   Delete          Immediate           true                   6d\nalicloud-disk-efficiency   alicloud/disk   Delete          Immediate           true                   6d\nalicloud-disk-essd         alicloud/disk   Delete          Immediate           true                   6d\nalicloud-disk-ssd          alicloud/disk   Delete          Immediate           true                   6d\n\n$ kubectl patch storageclass $StorageClass -p \'{"metadata": {"annotations":{"storageclass.kubernetes.io/is-default-class":"true"}}}\'\n')),(0,i.kt)("p",null,"Enable the addon and use the default StorageClass size 20GB."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ vela addon enable observability\n")),(0,i.kt)("h4",{id:"kubernetes-clusters-offered-by-other-cloud-providers"},"Kubernetes clusters offered by other cloud providers"),(0,i.kt)("p",null,"Please set the default StorageClass and ",(0,i.kt)("inlineCode",{parentName:"p"},"disk-size")," for different cloud provider's Kubernetes clusters."),(0,i.kt)("h2",{id:"view-monitoring-data"},"View monitoring data"),(0,i.kt)("h3",{id:"get-an-account-for-the-monitoring-dashboard"},"Get an account for the monitoring dashboard"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'$ kubectl get secret grafana -o jsonpath="{.data.admin-password}" -n vela-system | base64 --decode ; echo\n<password printed here>\n')),(0,i.kt)("p",null,"Using username ",(0,i.kt)("inlineCode",{parentName:"p"},"admin")," and the password above to login to the monitoring dashboard below."),(0,i.kt)("h3",{id:"get-the-monitoring-url"},"Get the monitoring url"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Self-built/regular clusters")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ sudo vela port-forward addon-observability -n vela-system 80:80\n")),(0,i.kt)("p",null,"Visit the Dashboard in the browser tab, which was opened by the command line, to view the various monitoring data introduced earlier."),(0,i.kt)("p",null,(0,i.kt)("img",{src:r(18065).Z})),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Kubernetes clusters provided by cloud providers")),(0,i.kt)("p",null,"Access the Grafana domain set up above directly to view the various monitoring data described earlier."),(0,i.kt)("h3",{id:"view-monitoring-data-for-various-categories"},"View monitoring data for various categories"),(0,i.kt)("p",null,"On the Grafana home page, click on the console as shown to access the monitoring data for the appropriate category."),(0,i.kt)("p",null,"The KubeVela Core System Monitoring Dashboard is the KubeVela Core system-level monitoring console.\nThe KubeVela Core Logging Dashboard is the KubeVela Core logging monitoring console."),(0,i.kt)("p",null," ",(0,i.kt)("img",{src:r(18071).Z})))}u.isMDXComponent=!0},18071:function(e,t,r){"use strict";t.Z=r.p+"assets/images/observability-dashboards-274b5bf0aeb0383f5142cf0d43171124.png"},18065:function(e,t,r){"use strict";t.Z=r.p+"assets/images/observability-system-level-dashboards-945c46b6cb18dbd5c4b3d67c369d7a19.png"},6300:function(e,t,r){"use strict";t.Z=r.p+"assets/images/observability-system-level-logging-search-675e0bb3eeaf63f0d14be9a64863a909.png"},82189:function(e,t,r){"use strict";t.Z=r.p+"assets/images/observability-system-level-logging-statistics-a36aa27532061592f0fdfaae39cd6d9f.png"},22860:function(e,t,r){"use strict";t.Z=r.p+"assets/images/observability-system-level-logging-statistics2-a4d5ceb36a30c5409aa5d2050a76a620.png"},79035:function(e,t,r){"use strict";t.Z=r.p+"assets/images/observability-system-level-summary-of-source-usages-chart-7033ee5c9c44ade108ae57c39a7d25a7.png"},91810:function(e,t,r){"use strict";t.Z=r.p+"assets/images/observability-system-level-summary-of-source-usages-640e27f1c37be7ef41761020889d65e2.png"}}]);